{"componentChunkName":"component---src-templates-post-template-js","path":"/blog/refactoring-chapter-9/","result":{"data":{"markdownRemark":{"excerpt":"리팩토링 분류 코드를 상태/전략 패턴로 치환 As-Is 상태패턴 \nLogger 클래스에 int로 선언되어 있는 상태값들을 State 객체로 치환해 준 후 각 상태에 따른 하위 클래스를 상속받아 구현합니다. To-Be 더 나아가기 개발자는 Logger 객체를 사용하면 start, stop…","html":"<h1>리팩토링</h1>\n<h4>분류 코드를 상태/전략 패턴로 치환</h4>\n<h2>As-Is</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Logger</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">STATE_STOPPED</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">STATE_LOGGING</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> _state<span class=\"token punctuation\">;</span>  \n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t_state <span class=\"token operator\">=</span> <span class=\"token constant\">STATE_STOPPED</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>_state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t\t<span class=\"token keyword\">case</span> <span class=\"token constant\">STATE_STOPPED</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"** START LOGGING **\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t\t\t_state <span class=\"token operator\">=</span> <span class=\"token constant\">STATE_LOGGING</span><span class=\"token punctuation\">;</span>  \n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>  \n\t\t\t<span class=\"token keyword\">case</span> <span class=\"token constant\">STATE_LOGGING</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token comment\">/* 아무것도 하지 않음 */</span><span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>  \n\t\t\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid state: \"</span> <span class=\"token operator\">+</span> _state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t<span class=\"token punctuation\">}</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>_state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t\t<span class=\"token keyword\">case</span> <span class=\"token constant\">STATE_STOPPED</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token comment\">/* 아무것도 하지 않음 */</span><span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>  \n\t\t\t<span class=\"token keyword\">case</span> <span class=\"token constant\">STATE_LOGGING</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"** STOP LOGGING **\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t\t\t_state <span class=\"token operator\">=</span> <span class=\"token constant\">STATE_STOPPED</span><span class=\"token punctuation\">;</span>  \n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>  \n\t\t\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid state: \"</span> <span class=\"token operator\">+</span> _state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t<span class=\"token punctuation\">}</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> info<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>_state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t\t<span class=\"token keyword\">case</span> <span class=\"token constant\">STATE_STOPPED</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ignoring: \"</span> <span class=\"token operator\">+</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>  \n\t\t\t<span class=\"token keyword\">case</span> <span class=\"token constant\">STATE_LOGGING</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Logging: \"</span> <span class=\"token operator\">+</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>  \n\t\t\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>  \n\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid state: \"</span> <span class=\"token operator\">+</span> _state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t<span class=\"token punctuation\">}</span>  \n\t<span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"information #1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"information #2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"information #3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"information #4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"information #5\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>상태패턴</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7745035d371510fb605d5e266b5affe2/d2cbc/state-pattern.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB9ElEQVQ4y42SW2+jMBCF8///2mqfmjRVsglQlOAYbGx8HXtsVuBuVk1bKeeBy6DPzJw5GymlEIIzzhi7LSKU9owxxvnQ9+M4DsPAOE8pzV+08d6nlKy1bds65xARAObntBFC3G63rusopVrrlBIA5JyfgqWUXdcRQkYhnHPzPIcQnoVjjBBCAIgAiBhjRMRn2y63HEK2OoVgh96wwQ297amlxA4DWPPTcR9w8i5N0lhbn6u6qt6bpqnruqqq87ltW2PMD3BehTjHpWVYmw8hhuU1hhBCjEtr//S4KkQUUnaEJETvvXMu55TzYjsApJQopVLKctYnWClljClhEKvh91UBgFLKWiuEMMaUcz/BnPO2beu6vlwuh8PBGHMPEyIqpaZpstauk+E3fxZCUErHcYwxeu/jOmSZExFL/ooXDyFdQkIIsdYunqdUjCpkWpVzBoBSLJX/cAlGUXkOq8qQALD6vRTLa8l/SgkRNw+rw9Vwxni9ylrrvS+NAMA4ju9Nc/pz4iM3xnwDCyEmOWmtAeDucM5ZaT1NH3UA0Fo/wjFG0nWjEJNSIYQySPk0UMo4n5Ty6/IB4BEG546/f13e9u1uO7RtMX25zHOz2173r9e3PTkdi21fYIDjy0v9+lrtduza3eF5npvj4bzdVrsdqc4lRX8BafFPfF2OitYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"state-pattern\"\n        title=\"state-pattern\"\n        src=\"/static/7745035d371510fb605d5e266b5affe2/f058b/state-pattern.png\"\n        srcset=\"/static/7745035d371510fb605d5e266b5affe2/c26ae/state-pattern.png 158w,\n/static/7745035d371510fb605d5e266b5affe2/6bdcf/state-pattern.png 315w,\n/static/7745035d371510fb605d5e266b5affe2/f058b/state-pattern.png 630w,\n/static/7745035d371510fb605d5e266b5affe2/d2cbc/state-pattern.png 705w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\nLogger 클래스에 int로 선언되어 있는 상태값들을 State 객체로 치환해 준 후 각 상태에 따른 하위 클래스를 상속받아 구현합니다.</p>\n<h2>To-Be</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token class-name\">Logger</span> logger<span class=\"token punctuation\">;</span>  \n\t  \n\t<span class=\"token class-name\">State</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Logger</span> logger<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>logger <span class=\"token operator\">=</span> logger<span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">StateStopped</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">{</span>  \n  \n\t<span class=\"token class-name\">StateStopped</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Logger</span> logger<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token annotation punctuation\">@Override</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"** START LOGGING **\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StateLogging</span><span class=\"token punctuation\">(</span>logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token annotation punctuation\">@Override</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token annotation punctuation\">@Override</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> info<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ignoring: \"</span> <span class=\"token operator\">+</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span>\n  \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">StateLogging</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">{</span>  \n  \n\t<span class=\"token class-name\">StateLogging</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Logger</span> logger<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n  \n\t<span class=\"token annotation punctuation\">@Override</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token annotation punctuation\">@Override</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"** STOP LOGGING **\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StateStopped</span><span class=\"token punctuation\">(</span>logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token annotation punctuation\">@Override</span>  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> info<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Logging: \"</span> <span class=\"token operator\">+</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Logger</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">State</span> _state<span class=\"token punctuation\">;</span>  \n\t  \n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StateStopped</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\tpublicvoid <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">State</span> state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t_state <span class=\"token operator\">=</span> state<span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t_state<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t_state<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n\t  \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> info<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t\t_state<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>더 나아가기</h3>\n<p>개발자는 Logger 객체를 사용하면 start, stop을 여러번 호출하게 되는데 그럴때마다\nnew 키워드를 통해 상태 객체를 생성한 후 Logger의 상태를 변경한다.</p>\n<p>계속해서 객체를 생성하는 것은 시스템적으로 좋지 못해 보인다.<br>\n어떻게 하면 좀 더 깨끗한 시스템으로 수정할 수 있을까?</p>\n<ul>\n<li>factory, IoC, DI</li>\n</ul>","frontmatter":{"title":"Refactoring Chapter 9","tags":["refactoring","2024"],"date":"February 14, 2024","description":"프로그램 실행중에 객체 분류코드가 변한다면 상태/전략 패턴으로 치환하고 위임을 사용합니다."}},"prev":null,"next":{"frontmatter":{"title":"Refactoring Chapter 7"},"fields":{"slug":"/blog/refactoring-chapter-7/"}}},"pageContext":{"slug":"/blog/refactoring-chapter-9/","prevSlug":null,"nextSlug":"/blog/refactoring-chapter-7/"}},"staticQueryHashes":["2714594843","3159585216"]}